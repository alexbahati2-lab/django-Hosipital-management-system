{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Doctor Dashboard</title>
    <link rel="stylesheet" href="{% static 'clinic/style.css' %}">
</head>
<body class="light-theme" id="theme-body">

<div class="container">

    <button class="theme-toggle" onclick="toggleTheme()">Switch Theme</button>

    <h2>Doctor Dashboard</h2>

    <div class="card">
        <h3>Patients Waiting</h3>

        {% if patients %}
        <table>
            <tr>
                <th>Patient</th>
                <th>Phone</th>
                <th>Action</th>
            </tr>
            {% for p in patients %}
            <tr>
                <td>{{ p.full_name }}</td>
                <td>{{ p.phone }}</td>
                <td>
                    <a href="{% url 'consult_patient' p.id %}" class="button">Consult</a>
                </td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
            <p>No patients waiting.</p>
        {% endif %}
    </div>

</div>

<script>
function toggleTheme() {
    let body = document.getElementById("theme-body");
    let theme = body.classList.contains("light-theme") ? "dark-theme" : "light-theme";
    body.className = theme;
    localStorage.setItem("clinic-theme", theme);
}

// Restore last selected theme
document.getElementById("theme-body").className = localStorage.getItem("clinic-theme") || "light-theme";
</script>

</body>
</html>
